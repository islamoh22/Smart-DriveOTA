/*********************************************************************/
/*	Author	:		Eslam Mohamed									 */
/*	Date	:		20/12/2023										 */
/*	Version :		V01												 */
/*********************************************************************/


/************************************************************************/
/*                        Include headers                        	    */
/************************************************************************/

#include "STD_TYPES.h"
#include "BIT_MATH.h"

#include "GPIO_interface.h"
#include "Timer_interface.h"

#include "DCmotor_interface.h"

#include "Car_Movement_interface.h"
#include "Car_Movement_private.h"
#include "Car_Movement_config.h"

/************************************************************************/
/*                     Functions implementations                      	*/
/************************************************************************/

void HCarMove_vInit( void )
{

	HDC_init( Motor1 ) ;
	HDC_init( Motor3 ) ;

}

/*******************************************************************************************************************/
/******************************************************************************************************************/

void HCarMove_vSpeedRatio( u16 A_u16SpeedRatio )
{

	HDC_MotorSpeedCntrl(  Motor1 , A_u16SpeedRatio ) ;
	HDC_MotorSpeedCntrl(  Motor3 , A_u16SpeedRatio ) ;

}

void HCarMove_vForward()
{

	/* IN1 = 1, IN2 = 0, IN3 = 1, IN4 = 0 */
	HDC_ClockWise  ( Motor1 ) ;
	HDC_ClockWise  ( Motor3 ) ;


}

/*******************************************************************************************************************/
/******************************************************************************************************************/

void HCarMove_vBackward()
{

	/* IN1 = 0, IN2 = 1, IN3 = 0, IN4 = 1 */

		HDC_CounterClockWise  ( Motor1 ) ;
		HDC_CounterClockWise  ( Motor3 ) ;

}

/*******************************************************************************************************************/
/******************************************************************************************************************/

void HCarMove_vRight()
{

	/* IN1 = 1, IN2 = 0, IN3 = 0, IN4 = 0 */

	HDC_ClockWise  ( Motor1 ) ;
	HDC_Stop  ( Motor3 ) ;

}

/*******************************************************************************************************************/
/******************************************************************************************************************/

void HCarMove_vLeft()
{

	/* IN1 = 0, IN2 = 0, IN3 = 1, IN4 = 0 */

		HDC_ClockWise  ( Motor3 ) ;
		HDC_Stop  ( Motor1 ) ;


}

/*******************************************************************************************************************/
/******************************************************************************************************************/

void HCarMove_vStop( void )
{

	/* IN1 = 0, IN2 = 0, IN3 = 0, IN4 = 0 */

	HDC_Stop  (Motor1) ;
	HDC_Stop  (Motor3) ;

}

/*******************************************************************************************************************/
/******************************************************************************************************************/

u32 HCarMove_u32GetCarSpeed( void )
{

	u32 L_u32SpeedValue = 0 ;

	L_u32SpeedValue = HDC_GetSpeedValue( Motor1 ) ;

	return L_u32SpeedValue ;

}


